<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha Área - Performance Pro</title>
    
    <script src="https://cdn.tailwindcss.com/3.4.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.3/dist/umd/supabase.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.18.5/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    
    <style> 
        body { font-family: 'Nunito', sans-serif; background-color: #f8fafc; color: #1e293b; } 
        .tab-btn { transition: all 0.2s; position: relative; cursor: pointer; color: #475569; }
        .tab-btn.active { color: #2563eb; background-color: #eff6ff; }
        
        /* Estilo Cards HUD */
        .kpi-card { 
            background: white; border-radius: 16px; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            border: 1px solid #f1f5f9; padding: 12px 16px;
            display: flex; flex-direction: column; justify-content: space-between;
            height: 100px; position: relative; overflow: hidden; transition: all 0.2s;
        }
        .kpi-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05); }
        .kpi-icon-bg { position: absolute; right: -10px; bottom: -15px; font-size: 4rem; opacity: 0.06; transform: rotate(-15deg); pointer-events: none; }
        
        .kpi-title { font-size: 0.65rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 4px; }
        .kpi-main-val { font-size: 1.5rem; font-weight: 900; line-height: 1; color: #1e293b; }
        .kpi-sub-row { display: flex; align-items: center; justify-content: space-between; margin-top: auto; font-size: 0.7rem; font-weight: 600; color: #64748b; }
        
        .custom-scrollbar::-webkit-scrollbar { height: 8px; width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    </style>
</head>
<body class="bg-slate-50">
    <script src="js/config.js"></script>
    <script src="js/sistema.js"></script> 
    <script src="js/menu/global.js"></script>
    <div id="global-menu"></div>

    <div class="bg-white border-b border-slate-200 shadow-sm fixed top-12 left-0 w-full z-40 h-14 flex items-center transition-all">
        <div class="max-w-[1600px] mx-auto px-4 w-full flex items-center justify-between">
            <div class="flex gap-1 overflow-x-auto no-scrollbar">
                <button onclick="MinhaArea.mudarAba('diario')" id="btn-ma-diario" class="tab-btn active px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2">
                    <i class="fas fa-calendar-day"></i> Dia a Dia
                </button>
                </div>

            <div class="flex items-center gap-4">
                <div id="admin-selector-container" class="hidden flex items-center gap-2 border-r border-slate-200 pr-4 mr-2">
                    <select id="admin-user-selector" onchange="MinhaArea.mudarUsuarioAlvo(this.value)" class="bg-blue-50 border border-blue-200 text-blue-800 text-xs font-bold rounded-lg p-1.5 outline-none cursor-pointer w-40 truncate">
                    </select>
                </div>
                <div class="flex gap-2">
                    <select id="sel-ano" onchange="MinhaArea.salvarEAtualizar()" class="bg-white border border-slate-200 text-slate-700 text-xs font-bold rounded-lg px-2 py-1.5 outline-none"></select>
                    <select id="sel-mes" onchange="MinhaArea.salvarEAtualizar()" class="bg-white border border-slate-200 text-slate-700 text-xs font-bold rounded-lg px-2 py-1.5 outline-none min-w-[100px]">
                        </select>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-8 pt-32">
        <div id="ma-tab-diario" class="animate-enter space-y-4">
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="kpi-card border-l-4 border-l-blue-500">
                    <i class="fas fa-cubes kpi-icon-bg text-blue-500"></i>
                    <div>
                        <div class="kpi-title text-blue-600">Produção Total</div>
                        <div class="kpi-main-val text-slate-800" id="kpi-total">--</div>
                    </div>
                    <div class="w-full bg-slate-100 h-1.5 rounded-full mt-2 overflow-hidden">
                        <div id="bar-progress" class="h-full bg-blue-500 rounded-full transition-all duration-1000" style="width: 0%"></div>
                    </div>
                    <div class="kpi-sub-row text-slate-500 mt-1">
                        <span>Meta Acumulada:</span>
                        <span id="kpi-meta-acumulada" class="font-bold text-blue-600">--</span>
                    </div>
                </div>

                <div class="kpi-card border-l-4 border-l-emerald-500">
                    <i class="fas fa-shield-alt kpi-icon-bg text-emerald-500"></i>
                    <div>
                        <div class="kpi-title text-emerald-600">Atingimento</div>
                        <div class="flex items-baseline gap-2">
                            <span class="kpi-main-val text-emerald-700" id="kpi-pct">--%</span>
                            <span id="kpi-status" class="text-[9px] font-bold bg-emerald-50 text-emerald-700 px-1.5 rounded uppercase">Análise</span>
                        </div>
                    </div>
                    <div class="kpi-sub-row text-slate-500">
                        <span>Dias Ativos:</span>
                        <span id="kpi-dias" class="font-bold text-emerald-600">--</span>
                    </div>
                </div>

                <div class="kpi-card border-l-4 border-l-purple-500">
                    <i class="fas fa-calendar-check kpi-icon-bg text-purple-500"></i>
                    <div>
                        <div class="kpi-title text-purple-600">Disponibilidade</div>
                        <div class="flex items-baseline gap-2 mt-1">
                            <span class="kpi-main-val text-purple-700" id="kpi-dias-uteis">--</span>
                            <span class="text-[9px] font-bold text-slate-400 uppercase">Dias Úteis</span>
                        </div>
                    </div>
                    <div class="kpi-sub-row text-slate-500 mt-1">
                        <span>Média Diária:</span>
                        <span id="kpi-media" class="font-bold text-purple-600">--</span>
                    </div>
                </div>

                <div class="kpi-card border-l-4 border-l-amber-500">
                    <i class="fas fa-bolt kpi-icon-bg text-amber-500"></i>
                    <div>
                        <div class="kpi-title text-amber-600">Referência</div>
                        <div class="flex items-end gap-1">
                            <span class="kpi-main-val text-slate-800" id="kpi-meta-dia">--</span>
                            <span class="text-[10px] text-slate-400 font-bold mb-1">/ Meta Diária</span>
                        </div>
                    </div>
                    <div class="kpi-sub-row text-slate-500">
                        <span>Status:</span>
                        <span class="font-bold text-amber-600 bg-amber-50 px-1.5 rounded">Fator Proporcional</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-slate-300 overflow-hidden flex flex-col h-[calc(100vh-320px)]">
                <div class="overflow-auto custom-scrollbar flex-1">
                    <table class="w-full text-sm text-left border-collapse">
                        <thead class="bg-slate-50 text-slate-600 font-bold uppercase text-[10px] tracking-wide sticky top-0 z-10 shadow-sm">
                            <tr class="divide-x divide-slate-200 border-b border-slate-300">
                                <th class="px-3 py-3 w-[12%]">Data</th>
                                <th class="px-2 py-3 w-[8%] text-center">Fator</th>
                                <th class="px-2 py-3 w-[8%] text-center">FIFO</th>
                                <th class="px-2 py-3 w-[8%] text-center">Grad. Total</th>
                                <th class="px-2 py-3 w-[8%] text-center">Grad. Parcial</th>
                                <th class="px-2 py-3 w-[10%] text-center bg-blue-50/50 text-blue-700 border-x border-blue-100">Produção</th>
                                <th class="px-2 py-3 w-[10%] text-center">Meta Dia</th>
                                <th class="px-2 py-3 w-[8%] text-center">% Ating.</th>
                                <th class="px-3 py-3 text-left">Justificativa / Observações</th>
                            </tr>
                        </thead>
                        <tbody id="tabela-extrato" class="divide-y divide-slate-200 bg-white">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="js/minha_area/main.js"></script>
    <script src="js/minha_area/geral.js"></script>
</body>
</html>